# Signal names should be quite regular and consistent now...
#* Trigger systematics updated
#* btagging systematics changed
#* electron veto
#* Shower shape corrections
#* Untagged boundaries
#* RMS systematics
#* 80X_DCS05July_plus_Golden22 scales and smearing
#* ggh cross sections now all updated
#***same as 140716 but with funcitoning WH samples (in the previous batch they had zh names***
#PATH=~/eos/cms/store/group/phys_higgs/cmshgg/analyzed/moriond2016/flashgg-workspaces/
FILE=/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M120_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M123_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M124_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M126_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M127_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M130_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M123_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M124_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M126_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M127_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M120_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M123_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M124_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M126_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M127_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M130_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M123_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M124_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M126_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M127_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M125_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M125_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M123_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M124_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M126_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M127_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root
FILEEA=/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M120_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M130_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M120_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M130_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M125_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,output_VBFHToGG_M125_13TeV_amcatnlo_pythia8._reduced.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M120_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M130_13TeV_amcatnloFXFX_madspin_pythia8.root

FILE125=/vols/cms/szenz/sig_jobs_003d/output_GluGluHToGG_M125_13TeV_amcatnloFXFX_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ttHJetToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_ZHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root,/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M125_13TeV_amcatnlo_pythia8.root,/vols/cms/szenz/wh_sig_jobs_003d/output_WHToGG_M125_13TeV_amcatnloFXFX_madspin_pythia8.root



VBF125=/vols/cms/szenz/sig_jobs_003d/output_VBFHToGG_M125_13TeV_amcatnlo_pythia8.root



EXT=HggAnalysis_150716_BS036
#PROCS=ggh,vbf,tth,wh,zh
PROCS=ggh,vbf,wh,zh,tth
CATS=UntaggedTag_0,UntaggedTag_1,UntaggedTag_2,UntaggedTag_3,VBFTag_0,VBFTag_1,TTHHadronicTag,TTHLeptonicTag
OUTDIR=outdir_$EXT
SCALES="HighR9EB,HighR9EE,LowR9EB,LowR9EE"
SMEARS="HighR9EBPhi,HighR9EBRho,HighR9EEPhi,HighR9EERho,LowR9EBPhi,LowR9EBRho,LowR9EEPhi,LowR9EERho"
INTLUMI=6.26
#DATA=/vols/cms/szenz/data_jobs_003/allData.root
#DATA=/home/hep/szenz/adhoc_dataws_004/allData.root
#DATA=/home/hep/szenz/adhoc_dataws_003new/1225_of_1233.root
DATA=/home/hep/szenz/adhoc_dataws_003new/allData.root
BS=3.6
MASSLIST=120,123,124,125,126,127,130

#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT --batch IC --intLumi $INTLUMI --smears $SMEARS --scales $SCALES --bs $BS  --signalOnly  --massList $MASSLIST 
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT --intLumi $INTLUMI --backgroundOnly --dataFile $DATA --isData --batch IC 
./yieldsTable.py -w $FILE125 -s Signal/signumbers_${EXT}.txt -u Background/CMS-HGG_multipdf_$EXT.root --factor 2.40 --order "Total,ggh,vbf,wh,zh,tth:Untagged Tag 0,Untagged Tag 1,Untagged Tag 2,Untagged Tag 3,VBF Tag 0,VBF Tag 1,TTH Hadronic Tag,TTH Leptonic Tag,Total"
#./runFinalFitsScripts.sh -i $FILE125 -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --datacardOnly --dataFile $DATA --isData --batch IC
#./Signal/bin/reduceSamples -i $VBF125 -f 0.1
#./makeEffAcc.py $FILEEA Signal/outdir_${EXT}/sigfit/effAccCheck_all.root $INTLUMI
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --dataFile $DATA --isData --batch IC
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --combinePlotsOnly --dataFile $DATA --isData --batch IC

#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --backgroundOnly --pseudoDataDat $samples --batch IC
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --pseudoDataDat $samples --batch IC

##mv Plots/FinalResults/combineJobs13TeV_$EXT Plots/FinalResults/combineJobs13TeV_${EXT}_${SEED}
#cp -r /home/hep/lc1113/public_html/outdir_HggAnalysis_250216/combinePlots /home/hep/lc1113/public_html/outdir_HggAnalysis_250216/combinePlots_$SEED
#cp Background/BkgPlots/*{png,pdf} /home/hep/lc1113/public_html/outdir_HggAnalysis_250216/combinePlots_$SEED/.


####  UNBLINDING ###########

#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT --intLumi $INTLUMI --backgroundOnly --dataFile $DATA --isData --batch IC  --unblind
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --dataFile $DATA --isData --batch IC 
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --dataFile $DATA --isData --batch IC 
#./runFinalFitsScripts.sh -i $FILE -p $PROCS -f $CATS --ext $EXT  --intLumi $INTLUMI --combineOnly --combinePlotsOnly --dataFile $DATA --isData --batch IC 
 
